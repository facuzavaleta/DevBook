{% extends 'base.html' %}
{% load static %}
{% block page_content %}

<!-- Mensaje de Bienvenida al perfil -->
<h2>Perfil de {{ username }}</h2>

<!-- Posts de cada perfil -->
{% for post in user_posts %}
    <!-- Informacion del post -->
    <h3><a href="{% url 'post_detail' username=post.profile_owner.username post_id=post.id %}">{{ post.title }}</a></h3>
    <blockquote>{{ post.content }}</blockquote>
    <p>{{ post.created_at }}</p>
    <p>De: <a href="{% url 'home' username=post.posted_by.username %}">{{ post.posted_by.username }}</a></p>
    <p>Comments ({{ post.comment_set.count }})</p>

    <!-- Boton de eliminar post (solo el autor o dueÃ±o del perfil) -->
    {% if post.posted_by == request.user or post.profile_owner == request.user %}
    <form action="{% url 'delete_post' username=post.posted_by.username post_id=post.id %}" method="post" style="display: inline;">
        {% csrf_token %}
        <button type="submit">Eliminar</button>
    </form>
    {% endif %}
{% endfor %}

<!-- Formulario de nuevo post -->
<h2>Crear un nuevo post:</h2>
    <form method="post" action="">
        {% csrf_token %}
        {{ post_form.as_p }}
        <button type="submit">Publicar</button>
    </form>
{% endblock %}